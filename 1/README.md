# NAG-IoT
## Cisco Zahradníci
### 1. Příprava
#### a) Raspberry Pi 3
##### Volba jazyka
Volili jsme ze dvou jazyků – Python a JavaScript. Python se z počátku zdál jako lepší varianta, protože velikost komunity v oboru IoT je jednoznačně větší než u JS. To je výhoda jednak v množství dostupných knihoven a kvalitě jejich dokumentace, a jednak v četnosti návodů, jak s určitými součástkami pracovat. Avšak problém byl, že python znal pouze jeden člen našeho týmu a mohli tak vzniknout problémy v případě jeho absence. Javascript jsme na druhou stranu více méně znali všichni a měli jsme tak možnost kód všichni poupravit, vyžádala-li by si to situace. Pro práci s JS jsme použili Node.js a na správu jeho balíčků NPM. Pro verzování a cloudové uskladnění jsme používali GIT s repositářem na stránce [github.com](https://github.com/JanSkvaril/cisco1 "github.com").

##### Node.js
Pro spuštění javascriptových scriptů jsme používali [nodejs](https://nodejs.org "nodejs"). Jedná se o open-source prostředí pro spouštění javascriptu mimo prohlížeč, které používa stejný engine jako prohlížeč Chrome od společnosti Google (V8 JavaScript engine). Je podporován na všech významějších operačních systémech. V profesionálním prostředí se s ním nejčastěji setkáme na webových serverech.

##### npm (node package manager)
Pro náš projekt jsme potřebovali značné množství knihoven, proto jsme pro jejich správu používali [npm](https://www.npmjs.com/ "npm"). To nám umožnilo velmi jednoduše nainstalovat knihovny pomocí příkazu `npm install -nazev_knihovny-`. Tento příkaz navíc automaticky doinstaloval i všechny potřebné závislosti (dependecies), tj. instalovaná knihovna potřebovala. Příkazem `npm init` se vytvoří soubor `package.json` a složka `node_modules`. V `package.json` jsou uvedeny všechny nainstalované knihovny a jejich verze, v `node_modules` jsou potom samotné knihovny.

##### Zapojení
Díky tomu, že máme nejlepší možné Raspberry Pi B+, tak jeho příprava šla poměrně snadno. Pro prvotní nastavení jsme připojili Raspberry pomocí síťového kabelu k internetu, následovalo připojení monitoru, klavesnice a myši. Poté jsme vložili SD kartu do slotu s již předinstalovaným systémem Raspbian. Jako další jsme si vytiskli rozložení pinů na Raspberry pro snadnější práci a zapojování a ve finále jsme vytiskli krabičku pro Raspberry, aby jej bylo možné snadno uložit a přenášet. Obraz celé SD karty jsme si pro jistotu zálohovali, kdyby se něco neočekávaného stalo a my potřebovali čistý systém, kam bychom jen přidali samostatně zálohované kódy. 

##### Konfigurace
Při prvotním spuštění jsme pomocí GUI zkontrolovali úspěšné připojení do sítě.  Spustili jsme terminál a již v konfiguraci Raspberry pokračovali zde. Provedli jsme nezbytné aktualizace balíčků pomocí příkazů `sudo apt-get update` & `sudo apt-get upgrade` a znovu jsme skontrovali správné nastavení síťového rozhraní příkazem `ifconfig`. Poté jsme změnili v `sshd_config` pomocí příkazu `nano /etc/ssh/sshd_config` možnost přihlášení se vzdáleně k root učtu pomocí SSH. I když pro bezpečnost systému Raspbian je lepší se vzdáleně nepřihlašovat k účtu root a využívat jej minimálně. Pro zvolení nového hesla k účtu root jsme zadali příkaz `sudo passwd root`.  Bylo zapotřebí také povolit nezbytné rozhraní jako je SSH, I2C, WIRE a změnit rozlišení obrazovky, k tomu jsme využili příkazu `raspi-config`.  Pro vzdálenou plochu jsme si vybrali program VNC. Instalaci jsme provedli stažením *deb* balíčku přímo ze stránek [VNC](https://www.realvnc.com/en/connect/download/vnc/raspberrypi/ "VNC") a v terminále jsme balíček pomocí příkazu `apt install VNC-Server-6.3.2-Linux-ARM.deb` nainstalovali. Jelikož jsme měli přidělenou dynamickou IP adresu z DHCP, což při odpojení ze sítě a znovu připojení do sítě dochází ke změně IP adresy a my jsme ji potřebovali pro připojení k VNC a SSH. Tak pro naše potřeby byla buď možnost přidělit statickou IP adresu nebo ji zjišťovat pomocí příkazového řádku [následujícím příkazem](https://community.wia.io/d/16-find-your-raspberry-pi-on-the-network-without-a-monitor "následujícím příkazem") `arp -a | findstr b8-27-eb`. Nakonec jsme použili druhou variantu, zjišťováním příkazem. Pro připojení k Raspberry jsme také používali lokálního SSH klienta [Putty](https://www.putty.org/ "Putty") a pro vzdálenou správu dat jsme používali správce souborů [WinSCP](https://winscp.net/eng/index.php "WinSCP"). Jako lokální editor pro vývojové prostředí kódu jsme použili [Geany](https://www.geany.org/ "Geany") nainstalováním následujícím příkazem `apt-get install geany`.  Nakonec bylo ještě nutné nainstalovat balíčky [node.js](https://nodejs.org/en/ "node.js") pro spouštění JavaScriptu, což jsme provedli příkazem `apt-get install node.js` a k tomu ještě správce knihoven [NPM](https://www.npmjs.com/ "NPM") příkazem `apt-get install npm` a verzovací nástroj GIT příkazem `apt-get install git`.

#### b) Arudino Pro Micro
##### Zapojení
Arduino jsme si připravili a jako první věc jsme připájeli 2 řady pinů, které byly zabaleny u něj, abychom mohli zapojovat senzory a pracovat s ním. Na počítači si připravili Arduino IDE a začali pracovat na realizaci připojení senzorů na nepájivém poli. Samotné Arduino jsme zasunuli do nepájivého pole a v řadách odpovídajících pinů začali zapojovat vodiče pro práci se senzory.

##### Vývojové prostředí
Pro programování arduina jsme použili doporučené [Arduino IDE](https://www.arduino.cc/en/main/software "Arduino IDE"). Po instalaci na PC jsme museli změnit v menu Nástroje vývojovou desku na Arduino/Genuino Micro.
